<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>З 14 лютого, Мамо!</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #3d0a15;
        font-family: "Segoe UI", Roboto, sans-serif;
    }

    canvas { 
        display: block; 
        position: absolute; 
        top: 0; 
        left: 0; 
    }

    #heartBtn {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        width: 120px;
        height: 120px;
        cursor: pointer;
        z-index: 30;
        animation: pulse 1.8s infinite ease-in-out;
        filter: drop-shadow(0 0 15px rgba(255, 77, 109, 0.6));
        transition: opacity 0.5s;
    }

    @keyframes pulse {
        0%, 100% { transform: translate(-50%, -50%) scale(1); }
        50% { transform: translate(-50%, -50%) scale(1.15); }
    }

    #wish {
        position: absolute;
        top: 55%; left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: #ffffff;
        width: 80%;
        max-width: 300px;
        font-size: 1.1rem;
        line-height: 1.5;
        opacity: 0;
        pointer-events: none;
        z-index: 25;
        text-shadow: 2px 1px 8px rgba(0,0,0,0.7);
        transition: opacity 2s ease-in;
    }

    .photo {
        position: absolute;
        width: 200px;
        height: auto;
        border: 6px solid white;
        border-bottom: 30px solid white;
        box-shadow: 0 12px 30px rgba(0,0,0,0.7);
        opacity: 0;
        transition: 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: 10;
    }

    /* Початкові позиції фото */
    #p1 { top: 8%; left: 10%; }
    #p2 { top: 10%; right: 12%; }
    #p3 { bottom: 14%; left: 15%; }
    #p4 { bottom: 24%; right: 15%; }

    /* Медіа-запити для мобільних пристроїв */
    @media (max-width: 768px) {
        #heartBtn { width: 90px; height: 90px; }
        #wish { font-size: 1rem; max-width: 90%; }
        .photo { width: 140px; border: 4px solid white; border-bottom: 20px solid white; }
        #p1 { top: 5%; left: 5%; }
        #p2 { top: 5%; right: 5%; }
        #p3 { bottom: 10%; left: 10%; }
        #p4 { bottom: 15%; right: 10%; }
    }

    @media (max-width: 480px) {
        #heartBtn { width: 70px; height: 70px; }
        #wish { font-size: 0.9rem; max-width: 95%; }
        .photo { width: 100px; border: 3px solid white; border-bottom: 15px solid white; }
        #p1 { top: 5%; left: 5%; }
        #p2 { top: 5%; right: 5%; }
        #p3 { bottom: 8%; left: 8%; }
        #p4 { bottom: 12%; right: 8%; }
    }
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="heartBtn">
    <svg viewBox="0 0 32 32" fill="#ff4d6d">
        <path d="M16 28.5c-.5 0-1-.2-1.4-.5l-10-9.2C2.4 16.7 1 14.3 1 11.5 1 6.8 4.8 3 9.5 3c2.5 0 4.8 1.1 6.5 2.9C17.7 4.1 20 3 22.5 3 27.2 3 31 6.8 31 11.5c0 2.8-1.4 5.2-3.6 7.3l-10 9.2c-.4.3-.9.5-1.4.5z"/>
    </svg>
</div>

<div id="wish">
    <strong>Матусю, зі святом!</strong><br><br>
    Ти — найдорожча людина <br> 
    у моєму всесвіті. <br>
    Дякую за твою любов, <br>
    що збирає мої дні <br>
    у прекрасне ціле.<br><br>
    Люблю тебе! ❤️
</div>

<img src="img/me-and-mom-1.png" class="photo" id="p1">
<img src="img/me-and-mom-2.jpg" class="photo" id="p2">
<img src="img/me-and-mom-3.png" class="photo" id="p3">
<img src="img/me-and-mom-4.png" class="photo" id="p4">

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const heartBtn = document.getElementById("heartBtn");
const wish = document.getElementById("wish");
const photos = document.querySelectorAll('.photo');

let particles = [];
let bgHearts = [];
let transformed = false;

function drawMiniHeart(x, y, size, color) {
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.bezierCurveTo(x, y - size/2, x - size, y - size/2, x - size, y);
    ctx.bezierCurveTo(x - size, y + size/2, x, y + size, x, y + size);
    ctx.bezierCurveTo(x, y + size, x + size, y + size/2, x + size, y);
    ctx.bezierCurveTo(x + size, y - size/2, x, y - size/2, x, y);
    ctx.fill();
}

class Particle {
    constructor(){
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.vx = (Math.random() - 0.5) * 1.5;
        this.vy = (Math.random() - 0.5) * 1.5;
        this.size = 3 + Math.random() * 4;
        this.color = `rgba(255, ${120 + Math.random()*135}, ${140 + Math.random()*115}, 0.85)`;
        this.tx = this.x;
        this.ty = this.y;
    }
    update() {
        if(transformed){
            this.x += (this.tx - this.x) * 0.07;
            this.y += (this.ty - this.y) * 0.07;
        } else {
            this.x += this.vx;
            this.y += this.vy;
            if(this.x < 0 || this.x > canvas.width) this.vx *= -1;
            if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
        }
    }
    draw(){ drawMiniHeart(this.x, this.y, this.size, this.color); }
}

class BGHeart {
    constructor(){ this.init(); }
    init(){
        this.x = Math.random() * canvas.width;
        this.y = canvas.height + 20;
        this.size = 8 + Math.random() * 12;
        this.speed = 0.5 + Math.random() * 1;
        this.opacity = 0.05 + Math.random() * 0.2;
    }
    update(){ this.y -= this.speed; if(this.y < -20) this.init(); }
    draw(){ ctx.globalAlpha = this.opacity; ctx.font = this.size + 'px serif'; ctx.fillText('❤️', this.x, this.y); }
}

function getHeartPath(num){
    const pts = [];
    const scale = 21; 
    for(let i=0; i<num; i++){
        const t = Math.PI * 2 * (i / num);
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
        pts.push({ x: x * scale + canvas.width/2, y: y * scale + canvas.height/2 });
    }
    return pts;
}

for(let i=0; i<500; i++) particles.push(new Particle());
for(let i=0; i<15; i++) bgHearts.push(new BGHeart());

heartBtn.addEventListener("click", () => {
    transformed = true;
    const heartPts = getHeartPath(particles.length);
    particles.forEach((p, i) => { p.tx = heartPts[i].x; p.ty = heartPts[i].y; });
    
    heartBtn.style.opacity = '0';
    setTimeout(() => { heartBtn.style.display = 'none'; }, 500);
    
    photos.forEach((img, i) => {
        setTimeout(() => {
            img.style.opacity = '1';
            const rot = (Math.random() - 0.5) * 45;
            img.style.transform = `scale(1) rotate(${rot}deg)`;
        }, i * 900 + 400);
    });

    setTimeout(() => { wish.style.opacity = 1; }, 2800);
});

function animate(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    bgHearts.forEach(h => { h.update(); h.draw(); });
    ctx.globalAlpha = 1;
    particles.forEach(p => { p.update(); p.draw(); });
    requestAnimationFrame(animate);
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

animate();
</script>
</body>
</html>
